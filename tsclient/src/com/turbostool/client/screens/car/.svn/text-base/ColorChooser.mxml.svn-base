<?xml version="1.0" ?>
<mx:Canvas xmlns:mx="http://www.adobe.com/2006/mxml"        
           xmlns:controls="com.turbostool.controls.*"
           verticalScrollPolicy="off"
           horizontalScrollPolicy="off">

    <mx:Script><![CDATA[
        import mx.controls.Button;         
        import mx.events.ListEvent;
        import Math;

        [Bindable]
        public var colorIndex:Number = 1;

        private var _colorCount:Number = 8;

        private var _shift:Number = 0;

        [Bindable]
        public function get shift():Number {
            return _shift;
        }

        public function set shift(val:Number):void {
            _shift = val;
            dataP = dataP;
        }

        [Bindable]
        private function get dataP():Array
        {
            return [1,2,3,4,5,6,7,8].map(function(i:Number, index:int, array:Array):Number{return i+shift;});
        }

        private function set dataP(arr:Array):void {}

        [Bindable]
        public function get colorCount():Number {
            return _colorCount;
        }

        public function set colorCount(val:Number):void {
            _colorCount = val;
            shift = Math.max(0, _colorCount - 8);
	    colorIndex = Math.min(val, colorIndex);
        }

        private function onLeft():void
        {
           if (shift>0) shift--;
        }

        private function onRight():void
        {
           if (shift+8<colorCount) shift++;
        }

        private function onColorItemClick(event: ListEvent):void
        {
           colorIndex = event.currentTarget.selectedItem as Number;
           colorList.selectedIndex = -1; 
        }

        ]]></mx:Script>
    <mx:HBox id="colors" height="49" horizontalGap="2" verticalAlign="middle"
             horizontalAlign="center">
        <mx:Button id="btnPrevCar" styleName="btnPrev" click="onLeft()" visible="{colorCount>8}" alpha="1.0"/>
        <controls:TileListWithoutSelection id="colorList" dataProvider="{dataP}" height="32" width="453"
                     borderThickness="0"
                     backgroundAlpha="0"
                     focusAlpha="0"
                     focusBlendMode="BlendMode.LIGHTEN"
                     useRollOver="false"
                     itemClick="onColorItemClick(event)"
                     verticalScrollPolicy="off"
                     horizontalScrollPolicy="off"
                     itemRenderer="com.turbostool.client.screens.car.ColorRenderer"/>
        <mx:Button id="btnNextCar" styleName="btnNext" click="onRight()" visible="{colorCount>8}" alpha="1.0"/>

    </mx:HBox>
</mx:Canvas>